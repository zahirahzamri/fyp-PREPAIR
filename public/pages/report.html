<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Report</title>
    <link type="text/css" href="/public/css/materialize.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link type="text/css" href="/public/css/styles.css" rel="stylesheet">
    <script type="text/javascript" src="/public/js/materialize.min.js"></script>    
    <link rel="manifest" href="/public/manifest.json">
    <link rel="apple-touch-icon" href="/public/img/icons/logo96.png">  
    <meta name="apple-mobile-web-app-status-bar" content="#00b4d8">
    <meta name="theme-color" content="#00b4d8">
    <link rel="icon" type="image/png" sizes="32x32" href="/public/img/icons/logo32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/public/img/icons/logo16.png">  
    
    <style>
        #myInput {
            background-position: 10px 10px;
            background-repeat: no-repeat;
            background-color: white;
            color: black;
            width: 50%;
            height: max-content;
            font-size: 16px;
            padding: 12px 20px 12px 40px;
            border: 1px solid #ddd;
            margin-bottom: 12px;
        }

        /* filter part */
        .filterDiv {
            float: left;
            background-color: #2196F3;
            color: #ffffff;
            width: 100px;
            line-height: 100px;
            text-align: center;
            margin: 2px;
            display: none;
        }
        .show {display: block;}
        .filterContainer {
            margin-top: 20px;
            overflow: hidden;
        }
        .btn1 {
            border: none;
            outline: none;
            padding: 12px 16px;
            background-color: #f1f1f1;
            cursor: pointer;
        }
        .btn1:hover {background-color: #ddd;}
        .btn.active {
            background-color: #666;
            color: white;
        }

        /* dropdown checkboxes */

    </style>
</head>
<body>
    <!-- top nav with dropdown -->
    <div class="navbar-fixed">
        <nav class="nav-wrapper z-depth-0">
          <div class="container">
            <a class="logo" href="/public/pages/asset/mainPage.html">PRE<span>PAIR</span></a>
            <a href="#" class="sidenav-trigger" data-target="mobile-links">
              <i class="material-icons">menu</i>
            </a>
            <!-- Dropdown Structure -->
            <div id="dropdown1" class="dropdown-content row">
                <ul class="vertical-tabs col s8">
                    <li><a href="/public/pages/dashboard.html"          class="styleNav-dropdown"><i class="material-icons left">dashboard</i>Dashboard</a></li>
                    <li><a href="/public/pages/asset/mainAsset.html"    class="styleNav-dropdown"><i class="material-icons left">devices</i>Assets</a></li>
                    <li><a href="/public/pages/report.html"             class="styleNav-dropdown"><i class="material-icons left">table_chart</i>Report</a></li>
                </ul>                
            </div>
            <div id="dropdown2" class="dropdown-content row">
                <ul class="vertical-tabs col s8">
                    <li class="logged-in" style="display: none;"><a href="#" class="styleNav-dropdown modal-trigger" data-target="modal-account"><i class="material-icons left">account_circle</i>Profile</a></li>
                    <li class="admin"     style="display: none;"><a href="#" class="styleNav-dropdown modal-trigger" data-target="modal-addAdmin"><i class="material-icons left">group_add</i>Add Technician</a></li>
                    <li class="logged-in" style="display: none;"><a href="#" class="styleNav-dropdown"><i class="material-icons left">chat</i>Chat</a></li>
                    <li class="logged-in" style="display: none;"><a href="#" class="styleNav-dropdown"><i class="material-icons left">notifications</i>Notification</a></li>
                </ul>
            </div>

            <!-- navigation -->
            <ul class="right hide-on-med-and-down">
                <li class="logged-in" style="display: none;"><a href="/public/pages/asset/mainPage.html"                    class="styleNav">Home</a></li>
                <li class="admin"     style="display: none;"><a class="dropdown-trigger1" href="#!" data-target="dropdown1" class="styleNav">Assets<i class="material-icons right">arrow_drop_down</i></a></li>
                <li class="logged-in" style="display: none;"><a href="/public/pages/ticket.html"                            class="styleNav">Tickets</a></li>
                <li class="logged-in" style="display: none;"><a class="dropdown-trigger1" href="#!" data-target="dropdown2" class="styleNav">More<i class="material-icons right">arrow_drop_down</i></a></li>
                <!-- <li class="logged-in" style="display: none;"><a href="/public/index.html"                                   class="right styleNav" id="logout">Log out<i class="material-icons left">lock_open</i></a></li> -->
                <li class="logged-in" style="display: none;"><a href="/public/index.html" class="right styleNav" id="logout">Log out</a></li>
            </ul>
          </div>
        </nav>
      </div>
    <!-- side nav -->
    <ul class="sidenav" id="mobile-links">
        <li><a class="subheader">PRE<span>PAIR</span></a></li>
        <li class="logged-in"   style="display: none;"><a href="/public/pages/asset/mainPage.html"  class="styleNav waves-effect"><i class="material-icons left">Home</i>Home</a></li>
        <li><div class="divider"></div></li>
        <li class="admin"       style="display: none;"><a href="/public/pages/dashboard.html"       class="styleNav waves-effect"><i class="material-icons left">dashboard</i>Dashboard</a></li>
        <li class="admin"       style="display: none;"><a href="/public/pages/asset/mainAsset.html" class="styleNav waves-effect"><i class="material-icons left">devices</i>Asset</a></li>
        <li class="logged-in"   style="display: none;"><a href="/public/pages/ticket.html"          class="styleNav waves-effect"><i class="material-icons left">confirmation_number</i>Tickets</a></li>
        <li class="admin"       style="display: none;"><a href="/public/pages/report.html"          class="styleNav waves-effect"><i class="material-icons left">table_chart</i>Report</a></li>
        <li><div class="divider"></div></li>
        <li class="logged-in"   style="display: none;"><a href="#" class="modal-trigger waves-effect" data-target="modal-account"><i class="material-icons">account_circle</i>Profile</a></li>
        <li class="admin"       style="display: none;"><a href="#" class="modal-trigger" data-target="modal-addAdmin"><i class="material-icons">group_add</i>Add Technician</a></li>
        <li class="logged-in"   style="display: none;"><a href=""><i class="material-icons">chat</i>Chat</a></li>
        <li class="logged-in"   style="display: none;"><a href=""><i class="material-icons">notifications_active</i>Notification</a></li>
        <li><div class="divider"></div></li>
        <li class="logged-in"   style="display: none;"><a href="/public/index.html" class="buttonLogout waves-effect" id="logout"><i class="material-icons left">lock_open</i>Logout</a></li>
    </ul>
    <!-- ACCOUNT MODAL -->
    <div id="modal-account" class="modal">
        <div class="modal-content center-align">
            <h4>User Profile</h4><br />
            <img src="https://alscofirstaid.com.au/wp-content/uploads/2014/01/placeholder-150x150.png" class="ui image centered" id="img">
            <div class="account-details"></div>
        </div>
    </div>
    <!-- ADD TECHNICIAN USER MODAL -->
    <div id="modal-addAdmin" class="modal">
        <div class="modal-content center-align">
            <h4>Add technician</h4><br />
            <form class="center-align admin-actions admin" style="margin: auto; max-width: 300px; display: none;">
                <input type="email" placeholder="User email" id="admin-email" required />
                <button class="btn-small yellow darken-2 z-depth-0">Make technician</button>
                <p class="status-admin green-text center-align"></p>
            </form>
        </div>
    </div>


    
    <!-- content -->
    <header class="headerStyle darken-1 section container">
        <h4 class="center">ASSET MANAGEMENT</h2>
        <p class="flow-text center text-lighten-2">TEACHING & LEARNING SERVICES</p>
    </header>


    <div class="content container z-depth-1">
        <div class="row">
            <button class="input-field btn left btnNavigation" onclick="history.back()"><a href="" class="white-text" onclick=" return history.back()"><i class="material-icons left" onclick="history.back()">arrow_back</i>Back</a></button>
            <p class="text-title container">Report</p>
            <p class="text-desc container">List of all assets and tickets in database</p>
        </div>

        <div class="row">
            <div class="row">
                <!-- Function: Search asset -->
                <div class="col s4 push left">
                    <i class="material-icons left">search<input id="myInput2" type="text" placeholder="  Search.."></i>
                </div>

                <!-- Function: Sorting in ascending order -->
                <div class="col s8 right">
                    <p class="left"><i class="material-icons left">sort</i>Sorting in asc by:</p>
                    <button class="btn-small sortbtn" id="btnSort"  onclick="sortTable()">status</button>
                    <button class="btn-small sortbtn" id="btnSort2" onclick="sortTable2()">Brand</button>
                    <button class="btn-small sortbtn" id="btnSort3" onclick="sortTable3()">Location</button>
                </div>
            </div>

            <!-- Function: Filter -->
            <!-- nak buat checkbox dropdown -->
            <!-- <div class="row">
                <p class="left">Filter by:</p>

                <div class="col s6 push left">
                    <form name="FilterForm" class="FilterForm" action="" method="post" onsubmit="return validateForm()">
                        <div class="row">
                            <div class="col s9 push left">
                                <select name="filterOption" id="filterOption" multiple>
                                    <option value="Good">Status: Good</option>
                                    <option value="Faulty">Status: Faulty</option>
                                    <option value="PC">Asset Type: PC</option>
                                    <option value="Keyboard">Asset Type: Keyboard</option>
                                    <option value="Mouse">Asset Type: Mouse</option>
                                </select>
                            </div>
                            <div class="col s3 right center">
                                <input type="hidden" name="AnswerCondition" value="BrowserCheckAnswer"/>
                                <button class="btn-small submitbtn" type="submit" id="btnFilter">Continue</button>
                            </div>
                        </div>  
                    </form>
                </div>
            </div> -->

            
        </div>

        <!-- Report section -->
        <div class="row reportList" style="margin-left: 5%; margin-right: 5%; width: 90%;">
            <table class="allAsset highlight responsive-table" id="reportTable">  
              <thead>
                <th>Asset Name</th>
                <th>Asset Type</th>
                <th>Manufacturer</th>
                <th>Brand</th>
                <th>RAM</th>
                <th>Processor</th>
                <th>OS</th>
                <th>Storage</th>
                <th>Location</th>
                <th>Status</th>
              </thead>
  
                <tbody class="allAssetPC" id="reportTable2"></tbody>
                <tbody class="allAssetKB" id="reportTable2"></tbody>
                <tbody class="allAssetMS" id="reportTable2"></tbody>              
            </table>
        </div>
        
    </div>

    

    


    
    <!-- JAVASCRIPT PART -->

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script type="text/javascript" src="/public/js/materialize.min.js"></script>
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-storage.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-functions.js"></script>

    <script src="/public/js/fb.js"></script>

    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

    <script src="/public/js/auth.js"></script>
    <script src="/public/js/index.js"></script>    

    <script src="/public/js/app.js"></script>

    <script src="/public/js/ui.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.7.0/d3.js"></script>
    <script src="/public/js/db.js"></script>

    <script>
        $(document).ready(function(){
            $('select').formSelect();
            $(".dropdown-trigger").dropdown();
            
            $(".dropdown-trigger1").dropdown({
                coverTrigger: false,
                inDuration: 300,
                outDuration: 225,
                constraintWidth:false,
                hover: true, // Activate on hover
                belowOrigin: true, // Displays dropdown below the button
                gutter: 0,  //spacing from edge
                alignment: 'right'
            });
        });

        //for sorting data: Status, Brand, Location -->
        function sortTable() {
            var table, rows, switching, i, x, y, shouldSwitch;
            table = document.getElementById("reportTable");
            switching = true;
            /*Make a loop that will continue until
            no switching has been done:*/
            while (switching) {
                //start by saying: no switching is done:
                switching = false;
                rows = table.rows;
                /*Loop through all table rows (except the
                first, which contains table headers):*/
                for (i = 1; i < (rows.length - 1); i++) {
                    //start by saying there should be no switching:
                    shouldSwitch = false;

                    /*Get the two elements you want to compare,
                    one from current row and one from the next:*/
                    x = rows[i].getElementsByTagName("TD")[9];
                    y = rows[i + 1].getElementsByTagName("TD")[9];

                    //check if the two rows should switch place:
                    if (x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) {
                        //if so, mark as a switch and break the loop:
                        shouldSwitch = true;
                        break;
                    }
                }
                if (shouldSwitch) {
                    /*If a switch has been marked, make the switch
                    and mark that a switch has been done:*/
                    rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
                    switching = true;
                }
            }
        }
        
        function sortTable2() {
            var table, rows, switching, i, x, y, shouldSwitch;
            table = document.getElementById("reportTable");
            switching = true;

            while (switching) {
                switching = false;
                rows = table.rows;

                for (i = 1; i < (rows.length - 1); i++) {
                    shouldSwitch = false;
                    x = rows[i].getElementsByTagName("TD")[3];
                    y = rows[i + 1].getElementsByTagName("TD")[3];

                    if (x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) {
                        shouldSwitch = true;
                        break;
                    }
                }
                if (shouldSwitch) {
                    rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
                    switching = true;
                }
            }
        }

        function sortTable3() {
            var table, rows, switching, i, x, y, shouldSwitch;
            table = document.getElementById("reportTable");
            switching = true;

            while (switching) {
                switching = false;
                rows = table.rows;
                for (i = 1; i < (rows.length - 1); i++) {
                    shouldSwitch = false;
                    x = rows[i].getElementsByTagName("TD")[8];
                    y = rows[i + 1].getElementsByTagName("TD")[8];

                    if (x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) {
                        //if so, mark as a switch and break the loop:
                        shouldSwitch = true;
                        break;
                    }
                }
                if (shouldSwitch) {
                    rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
                    switching = true;
                }
            }
        }


        //for filter table
        var validateForm = function() {
            var checks = $('input[type="checkbox"]:checked').map(function() {
                return $(this).val();
            }).get()
            console.log(checks);
            return false;
        }
        
        // const filterForm = document.querySelector('.FilterForm');
        // if(filterForm){
        //     filterForm.addEventListener('submit', evt =>{
        //         evt.preventDefault();

        //         db.collection('assetKB')
        //             .get()
        //             .then(alert("Filter Part"))
        //             .then(function(){

        //             })
        //             .catch(err => console.log(err));
        //     })
        // }
        

        

        // for search in table
        $(document).ready(function(){
            $("#myInput2").on("keyup", function() {
                var value = $(this).val().toLowerCase();

                $("#reportTable2 tr").filter(function() {
                    $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
                });
            });
        });

    </script>
</body>
</html>
